# Super Orders â€” Full API Reference

Super orders are built for smart execution. They club the entry, target, and stop-loss legs (with optional trailing jump) into a single request so you can manage risk immediately after entry.

This gem exposes the full REST surface to create, modify, cancel, and list super orders across all supported exchanges and segments.

## Endpoints

| Method   | Path                                   | Description                           |
| -------- | -------------------------------------- | ------------------------------------- |
| `POST`   | `/super/orders`                        | Create a new super order              |
| `PUT`    | `/super/orders/{order_id}`             | Modify a pending super order          |
| `DELETE` | `/super/orders/{order_id}/{order_leg}` | Cancel a pending super order leg      |
| `GET`    | `/super/orders`                        | Retrieve the list of all super orders |

---

## Place Super Order

The place endpoint lets you submit a new super order that can include entry, target, stop-loss, and optional trailing jump definitions. It is available across exchanges and segments, and supports intraday, carry-forward, or MTF orders.

> â„¹ï¸ Static IP whitelisting with Dhan support is required before invoking this API.

```bash
curl --request POST \
  --url https://api.dhan.co/v2/super/orders \
  --header 'Content-Type: application/json' \
  --header 'access-token: JWT' \
  --data '{Request JSON}'
```

### Request body

```json
{
  "dhan_client_id": "1000000003",
  "correlation_id": "123abc678",
  "transaction_type": "BUY",
  "exchange_segment": "NSE_EQ",
  "product_type": "CNC",
  "order_type": "LIMIT",
  "security_id": "11536",
  "quantity": 5,
  "price": 1500,
  "target_price": 1600,
  "stop_loss_price": 1400,
  "trailing_jump": 10
}
```

### Parameters

| Field              | Type                     | Description                                                                                                                                                                     |
| ------------------ | ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `dhan_client_id`   | string *(required)*      | User specific identification generated by Dhan. When you call through `DhanHQ::Models::SuperOrder`, the gem injects your configured client id so you can omit this key locally. |
| `correlation_id`   | string                   | Caller generated correlation identifier                                                                                                                                         |
| `transaction_type` | enum string *(required)* | Trading side. `BUY` or `SELL`.                                                                                                                                                  |
| `exchange_segment` | enum string *(required)* | Exchange segment (see appendix).                                                                                                                                                |
| `product_type`     | enum string *(required)* | Product type. `CNC`, `INTRADAY`, `MARGIN`, or `MTF`.                                                                                                                            |
| `order_type`       | enum string *(required)* | Order type. `LIMIT` or `MARKET`.                                                                                                                                                |
| `security_id`      | string *(required)*      | Exchange standard security identifier.                                                                                                                                          |
| `quantity`         | integer *(required)*     | Number of shares for the order.                                                                                                                                                 |
| `price`            | float *(required)*       | Price at which the entry leg is placed.                                                                                                                                         |
| `target_price`     | float *(required)*       | Target price for the super order.                                                                                                                                               |
| `stop_loss_price`  | float *(required)*       | Stop-loss price for the super order.                                                                                                                                            |
| `trailing_jump`    | float *(required)*       | Price jump size used to trail the stop-loss.                                                                                                                                    |

> ðŸ When you call `DhanHQ::Models::SuperOrder.create`, pass snake_case keys as shown above. The client automatically camelizes
> them before posting to Dhan's REST API and injects your configured `dhan_client_id`, so you can omit that key in Ruby code.

### Response

```json
{
  "order_id": "112111182198",
  "order_status": "PENDING"
}
```

| Field          | Type        | Description                                         |
| -------------- | ----------- | --------------------------------------------------- |
| `order_id`     | string      | Order identifier generated by Dhan                  |
| `order_status` | enum string | Latest status. `TRANSIT`, `PENDING`, or `REJECTED`. |

---

## Modify Super Order

Use the modify endpoint to update any leg while the super order remains in `PENDING` or `PART_TRADED` status.

> â„¹ï¸ Static IP whitelisting with Dhan support is required before invoking this API.

```bash
curl --request PUT \
  --url https://api.dhan.co/v2/super/orders/{order_id} \
  --header 'Content-Type: application/json' \
  --header 'access-token: JWT' \
  --data '{Request JSON}'
```

### Request body

```json
{
  "dhan_client_id": "1000000009",
  "order_id": "112111182045",
  "order_type": "LIMIT",
  "leg_name": "ENTRY_LEG",
  "quantity": 40,
  "price": 1300,
  "target_price": 1450,
  "stop_loss_price": 1350,
  "trailing_jump": 20
}
```

### Parameters

| Field             | Type                                   | Description                                                                                                               |
| ----------------- | -------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| `dhan_client_id`  | string *(required)*                    | User specific identification generated by Dhan. Automatically added when you call through the Ruby models.                |
| `order_id`        | string *(required)*                    | Super order identifier generated by Dhan.                                                                                 |
| `order_type`      | enum string *(conditionally required)* | `LIMIT` or `MARKET`. Required when modifying `ENTRY_LEG`.                                                                 |
| `leg_name`        | enum string *(required)*               | `ENTRY_LEG`, `TARGET_LEG`, or `STOP_LOSS_LEG`. Entry leg updates entire order while status is `PENDING` or `PART_TRADED`. |
| `quantity`        | integer *(conditionally required)*     | Quantity update for `ENTRY_LEG`.                                                                                          |
| `price`           | float *(conditionally required)*       | Entry price update for `ENTRY_LEG`.                                                                                       |
| `target_price`    | float *(conditionally required)*       | Target price update for `ENTRY_LEG` or `TARGET_LEG`.                                                                      |
| `stop_loss_price` | float *(conditionally required)*       | Stop-loss price update for `ENTRY_LEG` or `STOP_LOSS_LEG`.                                                                |
| `trailing_jump`   | float *(conditionally required)*       | Trailing jump update for `ENTRY_LEG` or `STOP_LOSS_LEG`. Omit or set to `0` to cancel trailing.                           |

> â„¹ï¸ Once the entry leg status becomes `TRADED`, only the `TARGET_LEG` and `STOP_LOSS_LEG` can be modified (price and trailing jump).

### Response

```json
{
  "order_id": "112111182045",
  "order_status": "TRANSIT"
}
```

| Field          | Type        | Description                                                   |
| -------------- | ----------- | ------------------------------------------------------------- |
| `order_id`     | string      | Order identifier generated by Dhan                            |
| `order_status` | enum string | Latest status. `TRANSIT`, `PENDING`, `REJECTED`, or `TRADED`. |

---

## Cancel Super Order

Cancel a pending or active super order leg using the order ID. Cancelling the entry leg removes every leg. Cancelling a specific target or stop-loss leg removes only that leg and it cannot be re-added.

> â„¹ï¸ Static IP whitelisting with Dhan support is required before invoking this API.

```bash
curl --request DELETE \
  --url https://api.dhan.co/v2/super/orders/{order_id}/{order_leg} \
  --header 'Content-Type: application/json' \
  --header 'access-token: JWT'
```

### Path parameters

| Field       | Description                                                   | Example       |
| ----------- | ------------------------------------------------------------- | ------------- |
| `order_id`  | Super order identifier.                                       | `11211182198` |
| `order_leg` | Leg to cancel. `ENTRY_LEG`, `TARGET_LEG`, or `STOP_LOSS_LEG`. | `ENTRY_LEG`   |

### Response

```json
{
  "order_id": "112111182045",
  "order_status": "CANCELLED"
}
```

| Field          | Type        | Description                                                      |
| -------------- | ----------- | ---------------------------------------------------------------- |
| `order_id`     | string      | Order identifier generated by Dhan                               |
| `order_status` | enum string | Latest status. `TRANSIT`, `PENDING`, `REJECTED`, or `CANCELLED`. |

---

## Super Order List

List every super order placed during the trading day. The API nests leg details under the entry leg, and individual legs also appear in the main order book.

```bash
curl --request GET \
  --url https://api.dhan.co/v2/super/orders \
  --header 'Content-Type: application/json' \
  --header 'access-token: JWT'
```

### Response

```json
[
  {
    "dhan_client_id": "1100003626",
    "order_id": "5925022734212",
    "correlation_id": "string",
    "order_status": "PENDING",
    "transaction_type": "BUY",
    "exchange_segment": "NSE_EQ",
    "product_type": "CNC",
    "order_type": "LIMIT",
    "validity": "DAY",
    "trading_symbol": "HDFCBANK",
    "security_id": "1333",
    "quantity": 10,
    "remaining_quantity": 10,
    "ltp": 1660.95,
    "price": 1500,
    "after_market_order": false,
    "leg_name": "ENTRY_LEG",
    "exchange_order_id": "11925022734212",
    "create_time": "2025-02-27 19:09:42",
    "update_time": "2025-02-27 19:09:42",
    "exchange_time": "2025-02-27 19:09:42",
    "oms_error_description": "",
    "average_traded_price": 0,
    "filled_qty": 0,
    "leg_details": [
      {
        "order_id": "5925022734212",
        "leg_name": "STOP_LOSS_LEG",
        "transaction_type": "SELL",
        "total_quantity": 0,
        "remaining_quantity": 0,
        "triggered_quantity": 0,
        "price": 1400,
        "order_status": "PENDING",
        "trailing_jump": 10
      },
      {
        "order_id": "5925022734212",
        "leg_name": "TARGET_LEG",
        "transaction_type": "SELL",
        "remaining_quantity": 0,
        "triggered_quantity": 0,
        "price": 1550,
        "order_status": "PENDING",
        "trailing_jump": 0
      }
    ]
  }
]
```

### Response Parameters

| Field                   | Type        | Description                                                                                         |
| ----------------------- | ----------- | --------------------------------------------------------------------------------------------------- |
| `dhan_client_id`        | string      | User specific identification generated by Dhan.                                                     |
| `order_id`              | string      | Order identifier generated by Dhan.                                                                 |
| `correlation_id`        | string      | Correlation identifier supplied by the caller.                                                      |
| `order_status`          | enum string | Latest status. `TRANSIT`, `PENDING`, `CLOSED`, `REJECTED`, `CANCELLED`, `PART_TRADED`, or `TRADED`. |
| `transaction_type`      | enum string | Trading side. `BUY` or `SELL`.                                                                      |
| `exchange_segment`      | enum string | Exchange segment.                                                                                   |
| `product_type`          | enum string | Product type. `CNC`, `INTRADAY`, `MARGIN`, or `MTF`.                                                |
| `order_type`            | enum string | Order type. `LIMIT` or `MARKET`.                                                                    |
| `validity`              | enum string | Order validity. `DAY`.                                                                              |
| `trading_symbol`        | string      | Trading symbol reference.                                                                           |
| `security_id`           | string      | Exchange security identifier.                                                                       |
| `quantity`              | integer     | Ordered quantity.                                                                                   |
| `remaining_quantity`    | integer     | Quantity pending execution.                                                                         |
| `ltp`                   | float       | Last traded price.                                                                                  |
| `price`                 | float       | Order price.                                                                                        |
| `after_market_order`    | boolean     | Indicates if the order was placed after market hours.                                               |
| `leg_name`              | enum string | Leg identifier: `ENTRY_LEG`, `TARGET_LEG`, or `STOP_LOSS_LEG`.                                      |
| `trailing_jump`         | float       | Trailing jump for stop-loss.                                                                        |
| `exchange_order_id`     | string      | Exchange-generated order identifier.                                                                |
| `create_time`           | string      | Order creation timestamp.                                                                           |
| `update_time`           | string      | Latest update timestamp.                                                                            |
| `exchange_time`         | string      | Exchange timestamp.                                                                                 |
| `oms_error_description` | string      | OMS error description when applicable.                                                              |
| `average_traded_price`  | float       | Average traded price.                                                                               |
| `filled_qty`            | integer     | Quantity traded on the exchange.                                                                    |
| `triggered_quantity`    | integer     | Quantity triggered for stop-loss or target legs.                                                    |
| `leg_details`           | array       | Nested leg details for the super order.                                                             |

> âœ… `CLOSED` indicates the entry leg plus either target or stop-loss leg completed for the entire quantity. `TRIGGERED` appears on target and stop-loss legs to show which leg fired; inspect `triggered_quantity` for the executed quantity.
